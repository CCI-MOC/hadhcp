failover peer "failover-partner" {
     secondary;
{% for host in groups.dhcp_servers if hostvars[host].dhcp_role == "secondary" %}
     address {{ host }};
{% endfor %}
     port 647;
{% for host in groups.dhcp_servers if hostvars[host].dhcp_role == "primary" %}
     peer address {{ host }};
{% endfor %}
     peer port 647;
     max-response-delay 60;
     max-unacked-updates 10;
     load balance max seconds 3;
}

include "/etc/dhcp/common.conf";
